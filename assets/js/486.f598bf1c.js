"use strict";(self.webpackChunkvue3_tree_docs=self.webpackChunkvue3_tree_docs||[]).push([[486],{486:(e,o,n)=>{n.r(o),n.d(o,{default:()=>v,getNodeById:()=>m,setNodeById:()=>w,updateNodeById:()=>f});var d=n(252),t=n(577);const a={class:"tree"};var r=n(262),i=n(963);const c=["checked","indeterminate"],s={class:"tree-row-txt"},l={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},p=[(0,d._)("polyline",{points:"9 18 15 12 9 6"},null,-1)],u={render:function(e,o){return(0,d.wg)(),(0,d.iD)("svg",l,p)}},g={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},h=[(0,d._)("polyline",{points:"6 9 12 15 18 9"},null,-1)],k={components:{ArrowRight:u,ArrowDown:{render:function(e,o){return(0,d.wg)(),(0,d.iD)("svg",g,h)}}},props:{node:{type:Object,required:!0},indentSize:{type:Number,required:!0},gap:{type:Number,required:!0},getNode:{type:Function,required:!0},setNode:{type:Function,required:!0},updateNode:{type:Function,required:!0},expandRowByDefault:{type:Boolean,default:!1},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0}},emits:["emitNodeExpanded","emitCheckboxToggle","emitOnUpdate"],setup(e,{emit:o}){(0,d.YP)((()=>e.expandRowByDefault),(o=>{e.node.nodes&&(e.node.expanded=!e.expandable)}),{immediate:!0});const n=()=>{o("emitOnUpdate")};return{toggleExpanded:n=>{e.expandable&&(e.node.expanded=!!e.node.nodes&&!e.node.expanded,(0,d.Y3)((()=>{o("emitNodeExpanded",n,e.node.expanded)})))},emitNodeExpanded:(e,n)=>{o("emitNodeExpanded",e,n)},emitOnUpdate:n,toggleCheckbox:()=>{const{node:o,updateNode:d}=e;d(o.id,{checked:!o.checked},n)},emitCheckboxToggle:(e,n)=>{o("emitCheckboxToggle",e,n)}}},render:function(e,o,n,a,r,l){const p=(0,d.up)("arrow-right"),u=(0,d.up)("arrow-down"),g=(0,d.up)("tree-row",!0);return(0,d.wg)(),(0,d.iD)("li",{class:"tree-row",style:(0,t.j5)({"padding-left":n.indentSize+"px",gap:n.gap+"px","--row-hover-background":n.rowHoverBackground})},[(0,d._)("div",{class:"tree-row-item",onClick:o[2]||(o[2]=(0,i.iM)((e=>a.toggleExpanded(n.node)),["stop"]))},[n.node.nodes&&n.useIcon?((0,d.wg)(),(0,d.iD)(d.HY,{key:0},[n.node.expanded?(0,d.WI)(e.$slots,"iconInactive",{key:1},(()=>[(0,d.Wm)(u)])):(0,d.WI)(e.$slots,"iconActive",{key:0},(()=>[(0,d.Wm)(p)]))],64)):(0,d.kq)("",!0),(0,d.WI)(e.$slots,"checkbox",{checked:n.node.checked,indeterminate:n.node.indeterminate,id:n.node.id}),n.useCheckbox?(0,d.wy)(((0,d.wg)(),(0,d.iD)("input",{key:1,"onUpdate:modelValue":o[0]||(o[0]=e=>n.node.checked=e),type:"checkbox",checked:n.node.checked,indeterminate:n.node.indeterminate,onClick:o[1]||(o[1]=(0,i.iM)(((...e)=>a.toggleCheckbox&&a.toggleCheckbox(...e)),["stop"]))},null,8,c)),[[i.e8,n.node.checked]]):(0,d.kq)("",!0),(0,d._)("span",s,(0,t.zw)(n.node.label),1)]),n.node.expanded?((0,d.wg)(),(0,d.iD)("ul",{key:0,style:(0,t.j5)({gap:n.gap+"px"}),class:"tree-list"},[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(n.node.nodes,(o=>((0,d.wg)(),(0,d.j4)(g,{ref:"tree-row-"+o.id,key:o.id,node:o,"use-checkbox":n.useCheckbox,"use-icon":n.useIcon,gap:n.gap,"expand-row-by-default":n.expandRowByDefault,"indent-size":n.indentSize,"row-hover-background":n.rowHoverBackground,setNode:n.setNode,getNode:n.getNode,updateNode:n.updateNode,expandable:n.expandable,onEmitNodeExpanded:a.emitNodeExpanded,onEmitOnUpdate:a.emitOnUpdate,onEmitCheckboxToggle:a.emitCheckboxToggle},{iconActive:(0,d.w5)((()=>[(0,d.WI)(e.$slots,"iconActive",{},(()=>[(0,d.Wm)(p)]))])),iconInactive:(0,d.w5)((()=>[(0,d.WI)(e.$slots,"iconInactive",{},(()=>[(0,d.Wm)(u)]))])),checkbox:(0,d.w5)((({checked:o,indeterminate:n,id:t})=>[(0,d.WI)(e.$slots,"checkbox",{checked:o,indeterminate:n,id:t})])),_:2},1032,["node","use-checkbox","use-icon","gap","expand-row-by-default","indent-size","row-hover-background","setNode","getNode","updateNode","expandable","onEmitNodeExpanded","onEmitOnUpdate","onEmitCheckboxToggle"])))),128))],4)):(0,d.kq)("",!0)],4)}};function x(e){const o=e=>(e.forEach((e=>{e.checked=!1,e.expanded=!1,e.indeterminate=!1,Array.isArray(e.nodes)&&o(e.nodes)})),e);return o(e)}const w=function e(o,n,d){for(let t=0;t<o.length;t++){const a=o[t];a.id===n?o[t]={id:n,...d}:Array.isArray(a.nodes)&&(o[t].nodes=e(a.nodes,n,d))}return o},m=function e(o,n){for(let d=0;d<o.length;d++){const t=o[d];if(t.id===n)return t;if(Array.isArray(t.nodes)){const o=e(t.nodes,n);if(o)return o}}},b=function e(o){return o.map((o=>{if(o.nodes){o.nodes=e(o.nodes);const n=o.nodes.every((e=>e.checked)),d=o.nodes.some((e=>e.checked)),t=o.nodes.some((e=>e.indeterminate));n?(o.checked=!0,o.indeterminate=!1):d||t?(o.checked=!1,o.indeterminate=!0):n||(o.checked=!1,o.indeterminate=!1)}return o}))},y=function e(o,n){const d=void 0!==n?n:o.checked;return o.checked=d,o&&Array.isArray(o.nodes)&&(o.nodes=o.nodes.map((o=>({...o,checked:d,nodes:o.nodes?o.nodes.map((o=>e(o,d))):void 0})))),o},f=function e(o,n,d){for(let t=0;t<o.length;t++){const a=o[t];a.id===n?o[t]=y({...a,...d}):Array.isArray(a.nodes)&&(o[t].nodes=e(a.nodes,n,d))}return o},v={name:"Tree",components:{TreeRow:k},props:{nodes:{type:Array,required:!0},props:{type:Object,default:()=>({nodes:"nodes",label:"label"})},indentSize:{type:Number,default:24},gap:{type:Number,default:10},searchText:{type:String,default:""},expandRowByDefault:{type:Boolean,default:!1},expandAllRowsOnSearch:{type:Boolean,default:!0},useCheckbox:{type:Boolean,default:!1},useIcon:{type:Boolean,default:!0},rowHoverBackground:{type:String,default:"#e0e0e0"},expandable:{type:Boolean,default:!0}},emits:["onNodeExpanded","onCheckboxToggle","onUpdate"],setup(e,{emit:o}){const{search:n}={search:(e,o,n)=>{const d=(e,t)=>{if(t[n.label].toLowerCase().includes(o.toLowerCase()))return e.push(t),e;if(Array.isArray(t[n.nodes])){const o=t[n.nodes].reduce(d,[]);o.length&&e.push({...t,nodes:o})}return e};return e.reduce(d,[])}},t=(0,r.qj)({data:x(e.nodes)}),a=(0,r.iH)(e.expandRowByDefault),i=e=>m(t.data,e),c=async(e,o,n)=>{t.data=await b(f(t.data,e,o)),n()};return(0,d.YP)((()=>e.searchText),(()=>{let o=t.data;""!==e.searchText?(o=n(e.nodes,e.searchText,e.props),e.expandAllRowsOnSearch&&(a.value=!0)):(o=e.nodes,a.value=!1),t.data=b(o)})),{setNode:(e,o)=>{t.data.value=w(t.data,e,o)},getNode:i,updateNode:c,onNodeExpanded:(e,n)=>{o("onNodeExpanded",e,n)},state:t,reactiveExpandRowByDefault:a,onCheckboxToggle:e=>{o("onCheckboxToggle",e)},onUpdate:()=>{o("onUpdate",t.data)},toggleCheckbox:e=>{const{checked:o}=i(e);c(e,{checked:!o})}}},render:function(e,o,n,r,i,c){const s=(0,d.up)("tree-row");return(0,d.wg)(),(0,d.iD)("div",a,[(0,d._)("ul",{style:(0,t.j5)({gap:n.gap+"px"}),class:"tree-list"},[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(r.state.data,(o=>((0,d.wg)(),(0,d.j4)(s,{ref:"tree-row-"+o.id,key:o.id,node:o,"use-checkbox":n.useCheckbox,"use-icon":n.useIcon,"indent-size":n.indentSize,gap:n.gap,"expand-row-by-default":r.reactiveExpandRowByDefault,"row-hover-background":n.rowHoverBackground,setNode:r.setNode,getNode:r.getNode,updateNode:r.updateNode,expandable:n.expandable,onEmitNodeExpanded:r.onNodeExpanded,onEmitOnUpdate:r.onUpdate,onEmitCheckboxToggle:r.onCheckboxToggle},(0,d.Nv)({checkbox:(0,d.w5)((({id:o,checked:n,indeterminate:t})=>[(0,d.WI)(e.$slots,"checkbox",{checked:n,indeterminate:t,toggleCheckbox:()=>r.toggleCheckbox(o)},void 0,!0)])),_:2},[n.useIcon?{name:"iconActive",fn:(0,d.w5)((()=>[(0,d.WI)(e.$slots,"iconActive",{},void 0,!0)]))}:void 0,n.useIcon?{name:"iconInactive",fn:(0,d.w5)((()=>[(0,d.WI)(e.$slots,"iconInactive",{},void 0,!0)]))}:void 0]),1032,["node","use-checkbox","use-icon","indent-size","gap","expand-row-by-default","row-hover-background","setNode","getNode","updateNode","expandable","onEmitNodeExpanded","onEmitOnUpdate","onEmitCheckboxToggle"])))),128))],4)])},__scopeId:"data-v-1e6bea80"}}}]);